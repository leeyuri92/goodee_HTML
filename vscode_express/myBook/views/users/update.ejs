<div class="row my-5">
  <div class="col">
    <h1 class="text-center mb-5">íšŒì›ì •ë³´ìˆ˜ì •</h1>
    <div class="card p-5">
      <form name="frm" method="post">
        <div class="input-group my-2">
          <div class="input-group-text px-5">ì„±ëª…</div>
          <input class="form-control" name="name" value="ë‚˜ì˜ë‚œ" />
        </div>
        <div class="input-group my-2">
          <div class="input-group-text px-5">ì£¼ì†Œ</div>
          <input
            class="form-control"
            name="address"
            value="ì„œìš¸íŠ¹ë³„ì‹œ ê¸ˆì²œêµ¬ ê°€ì‚°ë””ì§€í„¸2ë¡œ 95 KMíƒ€ì›Œ 3ì¸µ 307í˜¸ Top Camp"
          />
        </div>
        <div class="input-group my-2">
          <div class="input-group-text px-5">ì „í™”</div>
          <input class="form-control" name="phone" value="010-1010-2020" />
        </div>
        <div>
          <img
            id="fileName"
            src="https://via.placeholder.com/200x200"
            width="30%"
          />
          <input class="form-control mt-2" type="file" name="file" />
        </div>
        <div class="text-center mt-3">
          <button class="btn-primary btn px-5">ì •ë³´ìˆ˜ì •</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ğŸ§¡ğŸ§¡ğŸ§¡ğŸ§¡ì†ŒìŠ¤ ê°€ì ¸ì˜¬ ê³³ğŸ§¡ğŸ§¡ğŸ§¡ğŸ§¡ -->
<script>
  $(frm).on('submit',async (event) => {
    event.preventDefault();
    if(window.confirm("íšŒì›ì •ë³´ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
      let name = $(frm.name).val();
      let address = $(frm.address).val();
      let phone = $(frm.phone).val();
      let email = $(frm.email).val();
      if(frm.file.files[0]){
        const snapshot = await uploadBytes(
          ref(storage,`/photo/${Date.now()}.jpg`),frm.file.files[0])
          const url = await getDownloadURL
          await setDoc(doc(db,`users/${uid}`),{
            email, name, address, phonne,photo
          })
      }
    }
    else {
      const photo = $("#fileName").attr('src')
      await setDoc(doc(db,`users/${uid}`),{
        email, name, address, phonne,photo
      })
    }
    $(frm.file).on('change',function(e){
      $("fileName").attr("src",URL.createObjectURL(e.target.files(0)))
    })
  })
</script>
